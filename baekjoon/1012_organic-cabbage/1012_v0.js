// ìµœì¢… ë‹µì•ˆ í’€ì´

const fs = require("fs");
const input = fs.readFileSync("/dev/stdin").toString().trim().split("\n");

let T = +input[0]; // í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ìˆ˜
let idx = 1; // ì‹œì‘: input[1]

// ë°©í–¥ ë²¡í„°: ìƒí•˜ì¢Œìš°
// ìˆœì„œëŒ€ë¡œ: ìƒ, í•˜, ì¢Œ, ìš°
const dx = [0, 0, -1, 1]; // xëŠ” ê°€ë¡œ ë°©í–¥
const dy = [-1, 1, 0, 0]; // yëŠ” ì„¸ë¡œ ë°©í–¥

for (let t = 0; t < T; t++) {
  // input[1]
  const [M, N, K] = input[idx++].split(" ").map(Number); // ê°€ë¡œ, ì„¸ë¡œ, ë°°ì¶” ê°œìˆ˜
  // M N K ì½ê³  â†’ idx = 2

  // ë°°ì¶” ì§€ë„ ë§Œë“¤ê¸°: 0ìœ¼ë¡œ ì´ˆê¸°í™”ëœ 2ì°¨ì› ë°°ì—´
  const map = Array.from({ length: N }, () => Array(M).fill(0));

  // ë°°ì¶” ìœ„ì¹˜ ì…ë ¥ ë°›ì•„ì„œ ì§€ë„ì— í‘œì‹œ
  // Kê°œì˜ ì¢Œí‘œ ì½ê¸° â†’ input[2] ~ input[2+K-1] ê¹Œì§€
  for (let i = 0; i < K; i++) {
    const [x, y] = input[idx++].split(" ").map(Number);
    map[y][x] = 1; // ê·¸ ì¢Œí‘œì— ë°°ì¶” ì‹¬ê¸°(= ê°’ 1ë¡œ í‘œì‹œ)
  }

  // DFS í•¨ìˆ˜ ì •ì˜
  const dfs = (x, y) => {
    // ì¬ê·€í˜¸ì¶œ
    map[y][x] = 0; // ë°©ë¬¸í–ˆìœ¼ë¯€ë¡œ 0ìœ¼ë¡œ ì²˜ë¦¬(ë°©ë¬¸í•œ ê³³ì€ 0ìœ¼ë¡œ ë°”ê¿”ì„œ ë‹¤ì‹œ ì•ˆ ë³´ê²Œ í•¨)

    // ìƒí•˜ì¢Œìš° ë„¤ ë°©í–¥ í™•ì¸
    for (let d = 0; d < 4; d++) {
      // const [ì´ë™í• _x, ì´ë™í• _y] = í˜„ì¬_ìœ„ì¹˜ + ë°©í–¥;
      const nx = x + dx[d]; // x ì¢Œí‘œë¥¼ ì¢Œìš°ë¡œ ì´ë™
      const ny = y + dy[d]; // y ì¢Œí‘œë¥¼ ìƒí•˜ë¡œ ì´ë™

      // ë²”ìœ„ ë‚´ì´ê³ , ë°°ì¶”ê°€ ìˆìœ¼ë©´ ì¬ê·€ í˜¸ì¶œ
      if (
        nx >= 0 && // ì™¼ìª½ ë²—ì–´ë‚¨ ë°©ì§€
        nx < M && // ì˜¤ë¥¸ìª½ ë²—ì–´ë‚¨ ë°©ì§€
        ny >= 0 && // ìœ„ìª½ ë²—ì–´ë‚¨ ë°©ì§€
        ny < N && // ì•„ë˜ìª½ ë²—ì–´ë‚¨ ë°©ì§€
        map[ny][nx] === 1 // ë°©ë¬¸í•  ìœ„ì¹˜ì— ë°°ì¶”ê°€ ìˆëŠ”ê°€?
      ) {
        dfs(nx, ny);
      }
    }
  };

  let count = 0;

  // ì „ì²´ map ìˆœíšŒí•˜ë©° ë°°ì¶” ë©ì–´ë¦¬ ì°¾ê¸°
  // ì„¸ë¡œ, ê°€ë¡œ
  for (let y = 0; y < N; y++) {
    for (let x = 0; x < M; x++) {
      if (map[y][x] === 1) {
        dfs(x, y); // í•´ë‹¹ ì§€ì ì—ì„œ DFS ì‹œì‘(ğŸ”¥ ë°°ì¶” ë©ì–´ë¦¬ íƒìƒ‰)
        count++; // ìƒˆë¡œìš´ ë©ì–´ë¦¬ë‹ˆê¹Œ ì§€ë ì´ ìˆ˜ ì¦ê°€(âœ… ì§€ë ì´ 1ë§ˆë¦¬ í•„ìš” â†’ ì¹´ìš´íŠ¸ ì¦ê°€!)
      }
    }
  }

  console.log(count); // ê²°ê³¼ ì¶œë ¥
}
